<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <record id="view_production_lot_production_date_form" model="ir.ui.view">
            <field name="name">stock.production.lot.production.date.form</field>
            <field name="model">stock.production.lot</field>
            <field name="inherit_id" ref="stock.view_production_lot_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='ref']" position="after">
                    <field name="production_date"/>
                </xpath>
            </field>
    </record>

    <record id="view_stock_move_line_operation_tree_production_date" model="ir.ui.view">
        <field name="name">stock.move.line.inherit.tree.production.date</field>
        <field name="model">stock.move.line</field>
        <field name="inherit_id" ref="stock.view_stock_move_line_operation_tree"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='lot_name']" position="after" >
                <field name="production_date" force_save="1" attrs="{
                    'readonly': [('parent.picking_code', '!=', 'incoming')],
                }"/>
                <field name="container_no" force_save="1" attrs="{'readonly': [('parent.picking_code', '!=', 'incoming')]}"/>
                <field name="stock_qty" force_save="1" readonly="1"/>
            </xpath>
        </field>
    </record>

<!--    <record id="view_stock_move_line_detailed_operation_tree_production_date" model="ir.ui.view">-->
<!--        <field name="name">stock.move.line.operations.inherit.tree.production.date</field>-->
<!--        <field name="model">stock.move.line</field>-->
<!--        <field name="inherit_id" ref="stock.view_stock_move_line_detailed_operation_tree"/>-->
<!--        <field name="arch" type="xml">-->
<!--            <xpath expr="//field[@name='expiration_date']" position="after">-->
<!--                <field name="picking_code" invisible="1"/>-->
<!--                <field name="picking_type_use_existing_lots" invisible="1"/>-->
<!--                <field name="container_no" force_save="1" attrs="{-->
<!--                    'readonly': [('parent.picking_code', '!=', 'incoming')],-->
<!--                }"/>-->
<!--                <field name="stock_qty" force_save="1" attrs="{-->
<!--                    'readonly': [('parent.picking_code', '!=', 'incoming')],-->
<!--                }"/>-->
<!--            </xpath>-->
<!--        </field>-->
<!--    </record>-->
</odoo>