<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="report_mrporder_inherit" inherit_id="mrp.report_mrporder">
    <xpath expr="//table[@class='table table-sm']/tbody" position="replace">
        <tbody>
            <t t-if="o.move_raw_ids">
                <t t-foreach="o.final_product_ids" t-as="final_product_line">
                    <tr style="background-color:#e0dfda">
                        <td colspan="99"><span  t-field="final_product_line.final_product_id.name"/></td>
                    </tr>
                <t t-foreach="o.move_raw_ids" t-as="raw_line">
                    <t t-if="raw_line.bom_product_id.id==final_product_line.final_product_id.id">

                    <tr>
                        <td>
                            <span style="margin-left:20px;" t-field="raw_line.product_id"/>
                        </td>
                        <td t-attf-class="{{ 'text-right' if not has_product_barcode else '' }}">
                            <span t-esc="raw_line.product_uom_qty"/>
                            <span t-field="raw_line.product_uom" groups="uom.group_uom"/>
                        </td>
                        <td t-if="has_product_barcode" width="15%" class="text-center">
                            <t t-if="raw_line.product_id.barcode">
                                <img t-att-src="'/report/barcode/?type=%s&amp;value=%s&amp;width=%s&amp;height=%s' % ('Code128', raw_line.product_id.barcode, 600, 100)" style="width:100%;height:35px" alt="Barcode"/>
                            </t>
                        </td>
                    </tr>
                        </t>
                    </t>
            </t>
            </t>

        </tbody>
    </xpath>
</template>
</odoo>